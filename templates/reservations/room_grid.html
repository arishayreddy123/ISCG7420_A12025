{% extends "base.html" %}
{% block content %}
<div>
  <form method="get">
    <label>Select date:</label>
    <input type="date" name="date"
           value="{{ date|date:'Y-m-d' }}"
           min="{{ min_date }}">
    <button type="submit">Go</button>
  </form>
</div>
<table>
  <thead>
    <tr>
      <th>Room</th>
      {% for slot in grid.0.cells %}
        <th>{{ slot.start|date:"H:i" }}â€“{{ slot.end|date:"H:i" }}</th>
      {% endfor %}
    </tr>
  </thead>
  <tbody>
    {% for row in grid %}
      <tr>
        <td>{{ row.room.name }}</td>
        {% for cell in row.cells %}
          <td>
            {% if cell.free %}
              <a href="{% url 'reservations:confirm_reservation' row.room.id %}?
start_time={{ cell.start|date:'c'|urlencode }}&end_time={{ cell.end|date:'c'|urlencode }}">
                Book
              </a>
            {% else %}
              Booked
            {% endif %}
          </td>
        {% endfor %}
      </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
